
* [ポートフォリオ紹介](#anchor1) 
    * [トップページ](#anchor11)
    * [環境](#anchor12)
* [設計](#anchor2)
    * [インフラ構成図](#anchor22)
    * [ER図](#anchor23)
    * [画面一覧](#anchor24)
    * [機能一覧](#anchor25)
    * [画面遷移図](#anchor26)
* [開発](#anchor3)
    * [全体](#anchor31)
    * [フロントエンド](#anchor32)
    * [バックエンド](#anchor33)
    * [インフラストラクチャ + DevOps](#anchor34)
* [マネタイズ](#anchor4)




<a id="anchor1"></a>
# ポートフォリオ紹介

[https://takuwaku.work/](https://takuwaku.work/)

*TakuWaku*

TakuWakuは自宅の作業環境をシェアすることができる投稿型プラットフォームです。

このご時世でテレワークで家で仕事をしたり、家で過ごす時間が増えた人が多くなりました。

以前までは、オフィスでどんな環境で同僚が働いているのか参考にすることができていましたが、そのような機会も少なくなってしまい、デスク上の環境構築において参考にするものがなくなってしまいました。

そこで、どんな環境で働いているのか参考にできる場所、または在宅環境を整えた方が自慢できる場所を作ろうと思いこのアプリケーションを作成しました。

ちなみにアプリケーション名は「宅ワーク」と「宅(で)ワク(ワク)」という意味が込められています。

ゲストログイン機能もございますので、是非一度触れていただきたいです.

<a id="anchor11"></a>
## トップページ

PC

![スクリーンショット 2021-03-11 16 21 18](https://user-images.githubusercontent.com/65902454/110801620-c7105480-82c0-11eb-85aa-7822d804e40c.png)


スマートフォン , タブレット

<img src="https://user-images.githubusercontent.com/65902454/110801600-c1b30a00-82c0-11eb-9478-41618549487a.PNG" width="30%">



<a id="anchor12"></a>

## 環境

- PHP 7.3
- Laravel 8.12
- Vue.js 2.5.17
- Vue-Router 3.4.9
- Vuex 3.6.0
- Docker 19.03.13
- Docker Compose 1.27.4
- AmazonWebService
- CircleCI/CD





<a id="anchor2"></a>

# 設計


<a id="anchor22"></a>

## インフラ構成図

![Untitled Diagram (2)](https://user-images.githubusercontent.com/65902454/110801394-8ca6b780-82c0-11eb-99ca-974b0239d291.png)

AZを2つ用意し、public subnetとprivate subnetを一つずつ配置しました。

1. ユーザーからアクセスがきたらDNSサーバ(Route53)を経由してALBでsubnetを振り分けます。この時HTTPでアクセスされた場合、HTTPSにリダイレクトします。
2. public subnetにはECS(EC2)を配置して、webサーバとしてnginxコンテナとPHPコンテナを配置しております。
3. private subnetにはMySQLを採用したRDSを配置して、コンテナ以外からはアクセスできない仕様となっております。

また、自動テスト、デプロイにはCircleCIを採用しました。

1. GitHubのmainリポジトリにpushするとCircleCIが検知してテスト用イメージを作成して自動テストを実行します。
2. そしてテストが成功したら、自動でECRにイメージをpushします。
3. その後、ECSのタスク定義のコンテナイメージを更新して、サービスに反映させます。

<a id="anchor23"></a>

## ER図

![Untitled Diagram (1)](https://user-images.githubusercontent.com/65902454/110801372-87e20380-82c0-11eb-9348-186798ac4263.png)

<a id="anchor24"></a>

## 画面一覧


| No. | 画面名                       | 階層       |            | 説明                                                                | 未ログイン表示可否 |
|-----|------------------------------|------------|------------|---------------------------------------------------------------------|--------------------|
|   1 | 新規投稿表示画面             | トップ画面 | -          | トップ画面。新しい投稿一覧を表示する。                              | ○                  |
|   2 | 人気投稿表示画面             | トップ画面 | -          | 人気の投稿を表示する。                                              | ○                  |
|   3 | 人気商品表示画面             | トップ画面 | -          | 投稿にタグづけられた数を表示する。                                  | ○                  |
|   4 | 個別投稿表示画面             | トップ画面 | 個別ページ | 個々の投稿を表示する                                                | ○                  |
|   5 | タグ検索結果表示画面         | トップ画面 | タグ一覧   | タグ検索結果を表示する。                                            | ○                  |
|   6 | マイページ投稿一覧画面       | トップ画面 | マイページ | ログインユーザーの投稿を表示する                                    | ×                  |
|   7 | マイページフォロー一覧画面   | トップ画面 | マイページ | ログインユーザーのフォローを表示する                                | ×                  |
|   8 | マイページフォロワー一覧画面 | トップ画面 | マイページ | ログインユーザーのフォロワーを表示する                              | ×                  |
|   9 | マイページタグ一覧画面       | トップ画面 | マイページ | ログインユーザーが投稿したポストにタグづ けられたタグ一覧を表示する | ×                  |
|  10 | マイページいいね一覧画面     | トップ画面 | マイページ | ログインユーザーがいいねした投稿を表示する                          | ×                  |
|  11 | 投稿画面                     | トップ画面 | 投稿       | ポストを投稿できる                                                  | ×                  |
|  12 | アカウント設定画面           | トップ画面 | 設定       | メール、パスワードの設定を行う                                      | ×                  |
|  13 | プロフィール設定画面         | トップ画面 | 設定       | アイコン、ニックネームなどの設定を行う                              | ×                  |
|  14 | ログイン画面                 | トップ画面 | ログイン   | ログインをする                                                      | ○                  |
|  15 | 新規登録画面                 | トップ画面 | 新規登録   | ユーザー新規登録をする                                              | ○                  |



<a id="anchor25"></a>

## 機能一覧
| No. | 大機能           | 中機能                 | 小機能           | 概要                                                                           |
|-----|------------------|------------------------|------------------|--------------------------------------------------------------------------------|
|   1 | ユーザー認証関連 | 新規登録               | -                | 新規登録をしたらトークンを発行、ローディングしてホームに遷移                   |
|   2 |                  | ログイン               | -                | ログインをしたらトークンを発行、ローディングしてホームに遷移                   |
|   3 |                  | ログアウト             | -                | ログアウトしたらトークンを破棄、ローディングしてホームに遷移                   |
|   4 |                  | アカウント情報変更     | パスワードの表示 | アカウント情報変更、目の絵文字タップでパスワードを表示/非表示を切り替え        |
|   5 | 投稿             | 新規投稿               | 画像トリミング   | アップロードされた画像のトリミング                                             |
|   6 |                  |                        | タグ予測検索     | 既存のタグを予測検索してリストとして出力                                       |
|   7 |                  |                        | 商品検索         | 楽天APIを利用して商品を検索。 トリミングされた画像をタップするとタグづけられる |
|   8 |                  | ログインユーザ投稿一覧 | -                | ログインユーザの投稿した投稿一覧を表示                                         |
|   9 |                  | 新規投稿一覧           | -                | 新規投稿一覧を表示、無限スクロール                                             |
|  10 |                  | トレンド投稿一覧       | -                | トレンド投稿一覧を９件表示                                                     |
|  11 |                  | 個別投稿表示           | -                | 投稿された投稿を９件表示                                                       |
|  12 | フォロー         | フォロー一覧           | -                | フォロー一覧を表示                                                             |
|  13 |                  | フォロワー一覧         | -                | フォロワー一覧を表示                                                           |
|  14 |                  | フォロー作成、削除     | -                | フォローボタンタップでフォロー作成、二度押し禁止                               |
|  15 | タグ             | 一覧                   | -                | タグづけられた投稿を表示                                                       |
|  16 | いいね           | 作成、削除             | -                | いいねボタンタップでいいねを作成、二度押し禁止                                 |
|  17 |                  | 一覧                   | -                | ログインユーザのいいねした画像一覧を表示                                       |
|  18 | コメント         | 作成                   | 返信             | コメントを作成、矢印マークタップで返信                                         |
|  19 | 商品             | 商品一覧               | -                | タグ付けられた数が多い順に商品を並び替えて表示                                 |
|  20 | 検索             | ユーザー検索           | -                | 検索ワードからワードに合ったタグをリストとして表示                             |
|  21 |                  | タグ検索               | -                | 検索ワードからワードに合ったユーザーをリストとして表示                         |
|  22 | プロフィール     | プロフィール情報変更   | -                | プロフィール変更                                                               |
|  23 |                  | プロフィール表示       | -                | プロフィールを表示                                                             |


<a id="anchor26"></a>

## 画面遷移図
<img src="https://user-images.githubusercontent.com/65902454/110800489-924fcd80-82bf-11eb-91cb-6649424809b4.png" width="50%">


<a id="anchor3"></a>

# 開発

<a id="anchor31"></a>

## 全体

- PHP 7.3
- Laravel 8.12
- Vue.js 2.5.17
- Vue-Router 3.4.9
- Vuex 3.6.0
- Nginx 1.18
- MySQL 8.0
- Docker 19.03.13
- Docker Compose 1.27.4
- AmazonWebService
- CircleCI/CD

<a id="anchor32"></a>

## フロントエンド

Vue.js 2.5.17

@vue/cli 4.5.11

Vuex 3.6.0

Vue-Router 3.4.9

axios 0.21.1

<a id="anchor321"></a>

### ポイント

- Vueコンポーネントを使った完全SPAアプリケーション
- スマートフォンの利用を想定したレスポンシブデザイン
- Vuexストアでステート管理
- 未ログインユーザでの機能を制限
- 投稿一覧画面などでの無限スクロールの実装
- 404ページの実装
- ローディング画面の実装

また、ユーザにストレスを与えないようなデザインを意識をして開発に取り組みました。

- レスポンシブ時にformをタップすると自動で画面がズームされてしまうので、ズームされないように改善
- ゲストユーザーログインボタンを押してもらわないと見てすらもらえないため、ボタンに遊びを持たせて興味を引き立てる
- デザインカラーは青系の三色に絞り、目立たせたい要素には反対色の黄系の色を使用
- 投稿画像のトリミング機能の実装
- 投稿時に画像にタップすることで楽天APIから取得したアイテムを画像にタグづけすることできる。
- 投稿画面のタグの検索予測の実装

<a id="anchor33"></a>

## バックエンド

PHP 7.3

Laravel 8.12

Laravel Sanctum 2.8


<a id="anchor331"></a>

### ポイント

- Laravel Sanctumを利用したトークンベースのユーザー認証の実装
- 画像データはS3に保存
- その他のデータはRDS(MySQL)に保存
- 独自のアルゴリズムによる投稿トレンド機能を実装
- 可読性向上のためにバリデーションとコントローラのファイルを分離
- DB transactionの実装

controller処理に頼りすぎな点が課題だと考えており、ModelとControllerの処理の設計を学習中です。

<a id="anchor34"></a>

## インフラストラクチャ + DevOps

AmazonWebService

- ECS (EC2)
- ECR
- ALB
- Route53
- S3
- RDS

CircleCI

GitHub

Docker 19.03.13

Docker Compose 1.27.4

AWSに関しましては、インフラ構成図に記述した通りとなっております。

Githubではチーム開発を意識して開発に取り組みました。

- 機能、要件ごとにissueを作成
- issue毎にブランチを作成し管理しやすくする
- Pull Requestを都度依頼する

以上のことを意識してタスク管理も兼ねたGitHub開発を取り組みました。

<a id="anchor4"></a>

# マネタイズ

楽天APIを利用して投稿した写真に写っている商品を知ることができます。

そのリンクをクリックすることで、アフィリエイト広告費としてのマネタイズができると考えております。(現状未実装)


